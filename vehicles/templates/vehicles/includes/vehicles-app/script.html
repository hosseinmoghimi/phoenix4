<script>
    let url_add_vehicle = "{% url 'vehicles:add_new_vehicle' %}"
    let vehicles = JSON.parse(`{{vehicles_s|escapejs}}`)
    let vehicles_app = new Vue({
        el: "#vehicles-app",
        data: {
            vehicles: vehicles,
            new_vehicle_name: "",
        },
        methods: {
            add_vehicle: function () {
                let payload = {
                    csrfmiddlewaretoken: csrfmiddlewaretoken,
                    name: this.new_vehicle_name,
                }
                $.post(url_add_vehicle, payload).done((data) => {
                    if (data.result === 'SUCCEED') {
                        vehicles_app.vehicles.push(data.vehicle)
                        vehicles_app.new_vehicle_name=""
                    }
                })
                console.log(payload)
            },
        }
    })
</script>