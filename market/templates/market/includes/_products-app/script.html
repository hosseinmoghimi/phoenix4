
<script>
    // let category_id=parseInt("{{category_id}}")
    let products_app = new Vue({
        el: "#products-app",
        data: {
            products: [],
            title: "",
        },
        methods: {
            add_product: function () {
                let url = "{% url 'market:add_product' %}"
                let payload = {
                    csrfmiddlewaretoken: csrfmiddlewaretoken,
                    title: this.title,
                    category_id: category_id,
                }
                let posting = $.post(url, payload)
                posting.done((data) => {
                    console.log(data)
                    if(data.result==='SUCCEED'){
                        products_app.products.push(data.product)
                        products_app.title=""
                    }
                })
            },
        }
    })
</script>