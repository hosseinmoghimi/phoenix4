<script>
    let url_add_shop = "{% url 'market:add_shop' %}"
    let shops_app = new Vue({
        el: "#shops-app",
        mounted: function () {

        },
        data: {
            unit_name: "",
            unit_price: "",
            available: 15,
            level: "",
            shops: [],
        },
        methods: {
            to_price: function (value) {
                return to_price(value, "{{CURRENCY}}")
            },
            add_shop: function (product_id, supplier_id) {
                let payload = {
                    csrfmiddlewaretoken: csrfmiddlewaretoken,
                    product_id: product_id,
                    unit_name: this.unit_name,
                    supplier_id: supplier_id,
                    level: this.level,
                    unit_price: this.unit_price,
                    available: this.available,
                }
                console.log(payload)

                let posting = $.post(url_add_shop, payload)
                posting.done((data) => {
                    console.log(data)
                    // add_to_cart_app.shops=data.shops
                    shops_app.shops.push(data.shop)
                })
            },
        }
    })
</script>